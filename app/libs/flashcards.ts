export type Flashcard = {
    title: string;
    description: string;
    emoji: string;
    colorClass: string;
};

export function getFlashcardPersona(categoryScores: { [category: string]: number }): Flashcard {
    const allScores = Object.values(categoryScores);
    const avg = allScores.reduce((sum, val) => sum + val, 0) / allScores.length;

    const highCount = allScores.filter(score => score >= 80).length;
    const above50Count = allScores.filter(score => score >= 50).length;
    const lowCount = allScores.filter(score => score < 50).length;
    // const veryLowCount = allScores.filter(score => score < 30).length;

    const clarity = categoryScores["clarity"] ?? 0;
    const comms = categoryScores["comms"] ?? 0;

    const allAbove80 = allScores.every(score => score > 80);
    const noneBelow50 = allScores.every(score => score >= 50);

    if (allAbove80) {
        return {
            title: "à¸œà¸¹à¹‰à¸à¸¥à¹‰à¸² (The Daring One)",
            description: "à¸„à¸¸à¸“à¹€à¸›à¹‡à¸™à¸„à¸™à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸à¸¥à¸±à¸§à¸­à¸°à¹„à¸£à¹€à¸¥à¸¢ à¸à¸¥à¹‰à¸²à¸—à¸µà¹ˆà¸ˆà¸°à¸—à¸³à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸•à¸£à¸‡à¸«à¸™à¹‰à¸²! à¸„à¸¸à¸“à¸¡à¸µà¸—à¸±à¸à¸©à¸°à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¸—à¸µà¹ˆà¹‚à¸”à¸”à¹€à¸”à¹ˆà¸™à¹à¸¥à¸°à¹€à¸›à¹‡à¸™à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´à¹ƒà¸™à¸—à¸¸à¸à¹† à¸”à¹‰à¸²à¸™ à¸¡à¸µà¹‚à¸­à¸à¸²à¸ªà¸—à¸µà¹ˆà¸ˆà¸°à¹€à¸•à¸´à¸šà¹‚à¸•à¹à¸šà¸šà¸à¹‰à¸²à¸§à¸à¸£à¸°à¹‚à¸”à¸”à¹à¸¥à¸°à¹€à¸›à¹‡à¸™à¸œà¸¹à¹‰à¸™à¸³à¸”à¹‰à¸²à¸™à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¸­à¸¢à¹ˆà¸²à¸‡à¹à¸—à¹‰à¸ˆà¸£à¸´à¸‡",
            emoji: "ðŸš€",
            colorClass: "bg-green-100 border-green-500 text-green-800"
        };
    }

    if (clarity >= 70 && comms >= 70 && noneBelow50) {
        return {
            title: "à¸™à¸±à¸à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¸¡à¸²à¸à¸à¸µà¸¡à¸·à¸­ (The Skilled Communicator)",
            description: "à¸„à¸¸à¸“à¸¡à¸µà¸—à¸±à¸à¸©à¸°à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¸—à¸µà¹ˆà¹à¸‚à¹‡à¸‡à¹à¸à¸£à¹ˆà¸‡à¹à¸¥à¸°à¸¡à¸µà¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸žà¹ƒà¸™à¸«à¸¥à¸²à¸¢à¸¡à¸´à¸•à¸´ à¸ªà¸²à¸¡à¸²à¸£à¸–à¸£à¸±à¸šà¸¡à¸·à¸­à¸à¸±à¸šà¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¸•à¹ˆà¸²à¸‡à¹† à¹„à¸”à¹‰à¸”à¸µà¹€à¸¢à¸µà¹ˆà¸¢à¸¡ à¹à¸¥à¸°à¹€à¸›à¹‡à¸™à¸—à¸µà¹ˆà¸žà¸¶à¹ˆà¸‡à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¸­à¸·à¹ˆà¸™à¹„à¸”à¹‰à¹ƒà¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£",
            emoji: "âœ¨",
            colorClass: "bg-blue-100 border-blue-500 text-blue-800"
        };
    }

    if (avg >= 50 && above50Count >= 3) {
        return {
            title: "à¸œà¸¹à¹‰à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰ (The Learner)",
            description: "à¸„à¸¸à¸“à¸¡à¸µà¸žà¸·à¹‰à¸™à¸à¸²à¸™à¸—à¸µà¹ˆà¸”à¸µà¹ƒà¸™à¸—à¸±à¸à¸©à¸°à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¹à¸¥à¸°à¸ªà¸²à¸¡à¸²à¸£à¸–à¸£à¸±à¸šà¸¡à¸·à¸­à¸à¸±à¸šà¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¸—à¸±à¹ˆà¸§à¹„à¸›à¹„à¸”à¹‰ à¹à¸•à¹ˆà¸¢à¸±à¸‡à¸¡à¸µà¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸žà¸±à¸’à¸™à¸²à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸—à¸±à¸à¸©à¸°à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸à¹‰à¸²à¸§à¹„à¸›à¸­à¸µà¸à¸‚à¸±à¹‰à¸™ à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¹à¸¥à¸°à¸à¸¶à¸à¸à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡à¸ˆà¸°à¸žà¸²à¸„à¸¸à¸“à¹„à¸›à¸ªà¸¹à¹ˆà¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¹‚à¸”à¸”à¹€à¸”à¹ˆà¸™",
            emoji: "ðŸ’¡",
            colorClass: "bg-yellow-100 border-yellow-500 text-yellow-800"
        };
    }

    if (lowCount > 2 && above50Count < 3 && highCount < 2) {
        return {
            title: "à¸œà¸¹à¹‰à¸ªà¸³à¸£à¸§à¸ˆ (The Explorer)",
            description: "à¸„à¸¸à¸“à¸à¸³à¸¥à¸±à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸‚à¸­à¸‡à¸à¸²à¸£à¸ªà¸³à¸£à¸§à¸ˆà¹à¸¥à¸°à¸—à¸³à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸—à¸±à¸à¸©à¸°à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¸‚à¸­à¸‡à¸„à¸¸à¸“ à¸¡à¸µà¸«à¸¥à¸²à¸¢à¸”à¹‰à¸²à¸™à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸ªà¸²à¸¡à¸²à¸£à¸–à¸žà¸±à¸’à¸™à¸²à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¸à¹‰à¸²à¸§à¸à¸£à¸°à¹‚à¸”à¸” à¸à¸²à¸£à¹€à¸›à¸´à¸”à¹ƒà¸ˆà¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¹à¸¥à¸°à¸¥à¸­à¸‡à¸œà¸´à¸”à¸¥à¸­à¸‡à¸–à¸¹à¸à¸ˆà¸°à¸Šà¹ˆà¸§à¸¢à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¸„à¹‰à¸™à¸žà¸šà¸ˆà¸¸à¸”à¹à¸‚à¹‡à¸‡à¹ƒà¸«à¸¡à¹ˆà¹†",
            emoji: "ðŸ—ºï¸",
            colorClass: "bg-orange-100 border-orange-500 text-orange-800"
        };
    }

    return {
        title: "à¸œà¸¹à¹‰à¹€à¸à¹‰à¸²à¸£à¸­ (The Observer)",
        description: "à¸„à¸¸à¸“à¸­à¸²à¸ˆà¸žà¸šà¸„à¸§à¸²à¸¡à¸—à¹‰à¸²à¸—à¸²à¸¢à¸­à¸¢à¹ˆà¸²à¸‡à¸¡à¸²à¸à¹ƒà¸™à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¹à¸¥à¸°à¹€à¸‚à¹‰à¸²à¸ªà¸±à¸‡à¸„à¸¡ à¸‹à¸¶à¹ˆà¸‡à¸­à¸²à¸ˆà¸—à¸³à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¹€à¸¥à¸·à¸­à¸à¸—à¸µà¹ˆà¸ˆà¸°à¸ªà¸±à¸‡à¹€à¸à¸•à¸à¸²à¸£à¸“à¹Œà¸¡à¸²à¸à¸à¸§à¹ˆà¸²à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡ à¸à¸²à¸£à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸”à¹‰à¸§à¸¢à¸à¹‰à¸²à¸§à¹€à¸¥à¹‡à¸à¹† à¹à¸¥à¸°à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²à¸ªà¸ à¸²à¸žà¹à¸§à¸”à¸¥à¹‰à¸­à¸¡à¸—à¸µà¹ˆà¸›à¸¥à¸­à¸”à¸ à¸±à¸¢à¸ˆà¸°à¸Šà¹ˆà¸§à¸¢à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¹€à¸£à¸´à¹ˆà¸¡à¸žà¸±à¸’à¸™à¸²à¹„à¸”à¹‰",
        emoji: "ðŸ¤«",
        colorClass: "bg-red-100 border-red-500 text-red-800"
    };
}
