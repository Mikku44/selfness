import{r as m,j as e}from"./index-7zqVQZSl.js";import{u as L,A as I}from"./AuthContext-sY7-ro_6.js";import{l as M,r as O}from"./AuthService-DZLcndMQ.js";import{A as E,m as k,t as g,T as U}from"./index-BPPUFr39.js";import{l as D,n as P,o as q,p as T,_,O as $,M as F,L as z,S as B}from"./components-D-6D0vyL.js";import"./auth.client-CflvfX9_.js";/**
 * @remix-run/react v2.16.7
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */let R="positions";function H({getKey:t,...i}){let{isSpaMode:l}=D(),a=P(),r=q();T({getKey:t,storageKey:R});let c=m.useMemo(()=>{if(!t)return null;let o=t(a,r);return o!==a.key?o:null},[]);if(l)return null;let s=((o,d)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let p=JSON.parse(sessionStorage.getItem(o)||"{}")[d||window.history.state.key];typeof p=="number"&&window.scrollTo(0,p)}catch(u){console.error(u),sessionStorage.removeItem(o)}}).toString();return m.createElement("script",_({},i,{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${s})(${JSON.stringify(R)}, ${JSON.stringify(c)})`}}))}/*! js-cookie v3.0.5 | MIT */function h(t){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var a in l)t[a]=l[a]}return t}var J={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function b(t,i){function l(r,c,s){if(!(typeof document>"u")){s=h({},i,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var d in s)s[d]&&(o+="; "+d,s[d]!==!0&&(o+="="+s[d].split(";")[0]));return document.cookie=r+"="+t.write(c,r)+o}}function a(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var c=document.cookie?document.cookie.split("; "):[],s={},o=0;o<c.length;o++){var d=c[o].split("="),u=d.slice(1).join("=");try{var p=decodeURIComponent(d[0]);if(s[p]=t.read(u,p),r===p)break}catch{}}return r?s[r]:s}}return Object.create({set:l,get:a,remove:function(r,c){l(r,"",h({},c,{expires:-1}))},withAttributes:function(r){return b(this.converter,h({},this.attributes,r))},withConverter:function(r){return b(h({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}var j=b(J,{path:"/"});function V(){const[t,i]=m.useState(!1);m.useEffect(()=>{j.get("cookie_consent")||i(!0)},[]);const l=()=>{j.set("cookie_consent","all",{expires:365}),i(!1)},a=()=>{j.set("cookie_consent","essential",{expires:365}),i(!1)};return t?e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white shadow-lg border-t border-gray-200 px-4 py-4 sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700 max-w-lg mb-2 sm:mb-0",children:["เราใช้คุกกี้เพื่อปรับปรุงประสบการณ์ของคุณบนเว็บไซต์นี้ หากคุณใช้ต่อ แสดงว่าคุณยอมรับการใช้คุกกี้ของเรา",e.jsx("a",{href:"/privacy-policy",className:"ml-1 text-blue-600 underline",children:"อ่านเพิ่มเติม"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:a,className:"",children:e.jsx("div",{className:"btn-question",children:"เฉพาะที่จำเป็น"})}),e.jsx("button",{onClick:l,className:"bg-[var(--secondary-color)]",children:e.jsx("div",{className:"btn-question-active",children:"ยอมรับทั้งหมด"})})]})]}):null}function G(){const[t,i]=m.useState("login"),[l,a]=m.useState(null),[r,c]=m.useState(!1),[s,o]=m.useState([!1,!1]),{user:d,onLogin:u,setOnLogin:p}=L();async function v(f){var S,N,C;f.preventDefault(),a(null),c(!0);const x=new FormData(f.currentTarget),A=((S=x.get("displayName"))==null?void 0:S.toString().trim())??"",y=((N=x.get("email"))==null?void 0:N.toString().trim())??"",w=((C=x.get("password"))==null?void 0:C.toString().trim())??"";if(!y||!w){a("Email and password are required."),c(!1);return}try{if(t==="login"){const n=await M({email:y,password:w});if(n!=null&&n.errorCode){g.error(`${n==null?void 0:n.errorCode} : ${n==null?void 0:n.errorMessage}`);return}else g.success("Login Succesfully!")}else{const n=await O({email:y,password:w,displayName:A});if(n!=null&&n.errorCode){g.error(`${n==null?void 0:n.errorCode} : ${n==null?void 0:n.errorMessage}`);return}else g.success("Register Succesfully!")}p(!1)}catch(n){a(n.message||"Something went wrong")}finally{c(!1)}}return e.jsx(E,{children:u&&e.jsx(k.div,{className:"fixed inset-0 z-[99] flex items-center justify-center bg-black/20 bg-opacity-90",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>p(!1),children:e.jsxs(k.div,{className:"relative w-full max-w-md border-2 rounded-xl p-6 bg-white shadow-xl",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.25},onClick:f=>{f.stopPropagation()},children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("button",{onClick:()=>i(t==="login"?"register":"login"),className:"bg-[var(--secondary-color)] px-4 py-1 rounded text-white",children:t==="login"?"Register":"Login"})}),e.jsxs("form",{onSubmit:v,className:"flex flex-col gap-4 mt-6",children:[e.jsx("h2",{className:"text-xl font-bold text-center",children:t==="login"?"Login":"Register"}),l&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:l}),t=="register"&&e.jsx("input",{type:"text",name:"displayName",placeholder:"Display Name",required:!0,className:"w-full p-2 border rounded input"}),e.jsx("input",{type:"email",name:"email",placeholder:"Email",required:!0,className:"w-full p-2 border rounded input"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:s[0]?"text":"password",name:"password",placeholder:"Password",required:!0,className:"w-full p-2 border rounded input"}),e.jsx("button",{type:"button",onClick:()=>o([!s[0],s[1]]),className:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-gray-500 bg-white",children:s[0]?"Hide":"Show"})]}),t==="register"&&e.jsxs("div",{className:"relative w-full mt-2",children:[e.jsx("input",{type:s[1]?"text":"password",name:"password-confirm",placeholder:"Confirm Password",required:!0,className:"w-full p-2 border rounded input"}),e.jsx("button",{type:"button",onClick:()=>o([s[0],!s[1]]),className:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-gray-500 bg-white",children:s[1]?"Hide":"Show"})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full  text-white ",children:e.jsx("span",{className:"btn-primary",children:r?"Processing...":t==="login"?"Login":"Register"})})]})]})})})}const ee=()=>[{rel:"icon",href:"/favicon.png",type:"image/png"},{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"}];function te({children:t}){return e.jsxs("html",{lang:"th",children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),e.jsx(F,{}),e.jsx(z,{})]}),e.jsxs("body",{children:[e.jsx("noscript",{children:e.jsx("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-NGQ54J3S",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})}),e.jsx(V,{}),e.jsx(U,{position:"top-center",closeButton:!0,richColors:!0}),e.jsxs(I,{children:[e.jsx(G,{}),t]}),e.jsx(H,{}),e.jsx(B,{})]})]})}function se(){return e.jsx($,{})}export{te as Layout,se as default,ee as links};
